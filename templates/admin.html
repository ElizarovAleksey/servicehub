<!DOCTYPE html>
<html lang="ru" class="bg-bg text-text min-h-screen">
<head>
  <meta charset="UTF-8">
  <title>ServiceHub Admin</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/tailwind.css') }}?v=3">
</head>

<body class="bg-bg text-text min-h-screen
             bg-gradient-to-br from-bg via-bg to-bg/98 p-11">

<div class="max-w-5xl mx-auto
            bg-card/80 backdrop-blur-md
            border border-border
            rounded-3xl
            shadow-[0_20px_60px_rgba(0,0,0,0.08)]
            dark:shadow-[0_20px_60px_rgba(0,0,0,0.4)]
            px-10 py-12
            space-y-14">

  <!-- HEADER -->
  <div class="flex items-center justify-between">
    <div>
      <h1 class="text-2xl font-semibold tracking-tight">
        ‚öôÔ∏è ServiceHub ‚Äî –ê–¥–º–∏–Ω–∫–∞
      </h1>
      <p class="text-sm text-muted">
        –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞–º–∏
      </p>
    </div>

    <button id="toggleTheme"
      class="text-sm px-3 py-1.5 rounded-xl border border-border
             hover:bg-accent/10 transition">
      üåó –¢–µ–º–∞
    </button>
  </div>

  <!-- –§–û–†–ú–ê -->
  <div class="bg-card/80 backdrop-blur-md
              rounded-2xl p-8
              border border-border
              shadow-[0_8px_30px_rgba(0,0,0,0.06)]
              dark:shadow-none
              space-y-6">

    <h2 class="text-lg font-semibold">
      ‚ûï –î–æ–±–∞–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å
    </h2>

    <form method="post"
          class="grid grid-cols-1 md:grid-cols-2 gap-6">

      <input name="name"
             placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞"
             class="bg-bg/70 border border-border
                    focus:outline-none
                    focus:ring-2 focus:ring-accent/40
                    focus:border-accent
                    p-3 rounded-xl transition"
             required>

      <select name="group_id"
              class="bg-bg/70 border border-border
                     focus:outline-none
                     focus:ring-2 focus:ring-accent/40
                     focus:border-accent
                     p-3 rounded-xl transition"
              required>
        <option value="">‚Äî –í—ã–±–µ—Ä–∏—Ç–µ –≥—Ä—É–ø–ø—É ‚Äî</option>
        {% for g in groups %}
          <option value="{{ g.id }}">{{ g.name }}</option>
        {% endfor %}
      </select>

      <input name="url"
             placeholder="https://service.local"
             class="bg-bg/70 border border-border
                    focus:outline-none
                    focus:ring-2 focus:ring-accent/40
                    focus:border-accent
                    p-3 rounded-xl transition col-span-2"
             required>

      <textarea name="description"
                placeholder="–û–ø–∏—Å–∞–Ω–∏–µ"
                class="bg-bg/70 border border-border
                       focus:outline-none
                       focus:ring-2 focus:ring-accent/40
                       focus:border-accent
                       p-3 rounded-xl transition col-span-2"></textarea>

      <button type="submit"
        class="col-span-2
               bg-accent text-white
               py-3 rounded-xl
               hover:shadow-lg
               hover:shadow-accent/20
               transition duration-200">
        –î–æ–±–∞–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å
      </button>
    </form>

  </div>

  <!-- –°–ü–ò–°–û–ö -->
  <div class="space-y-6">

    <div class="flex items-center justify-between">
      <h2 class="text-lg font-semibold">
        üì¶ –¢–µ–∫—É—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã
      </h2>

    <a href="/admin/groups"
      class="inline-flex items-center gap-2
              px-4 py-2
              text-sm
              rounded-xl
              bg-accent/10 text-accent
              hover:bg-accent/20
              transition">
      üìÅ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø–∞–º–∏
    </a>
    </div>

    <div class="grid gap-4">

      {% for s in services %}
      <div class="bg-card/80 backdrop-blur-md
                  border border-border
                  rounded-2xl
                  p-5
                  flex items-center justify-between
                  hover:border-accent/30
                  hover:bg-card
                  transition duration-200">

        <div>
          <div class="font-medium text-base">
            {{ s.name }}
          </div>
          <div class="text-xs text-muted">
            {{ s.group.name }}
          </div>
        </div>

        <div class="flex gap-3">
          <a href="/admin/edit/{{ s.id }}"
             class="px-3 py-1.5 text-sm rounded-lg
                    bg-accent/15 text-accent
                    hover:bg-accent/25 transition">
            ‚úèÔ∏è
          </a>

          <form method="post"
                action="/admin/delete/{{ s.id }}"
                onsubmit="return confirm('–£–¥–∞–ª–∏—Ç—å —Å–µ—Ä–≤–∏—Å?')">
            <button
              class="px-3 py-1.5 text-sm rounded-lg
                     bg-rose-500/15 text-rose-400
                     hover:bg-rose-500/25 transition">
              üóë
            </button>
          </form>
        </div>

      </div>
      {% endfor %}

    </div>

  </div>

</div>

<script>
  const themeBtn = document.getElementById('toggleTheme');
  const html = document.documentElement;

  themeBtn.onclick = () => {
    html.classList.toggle('dark');
    localStorage.setItem(
      'theme',
      html.classList.contains('dark') ? 'dark' : 'light'
    );
  };

  if (localStorage.getItem('theme') === 'dark') {
    html.classList.add('dark');
  }
</script>

</body>
</html>